// Module included in the following assemblies:
//
// * installing/installing_openstack/installing-openstack-user.adoc
// * installing/installing_openstack/installing-openstack-user-kuryr.adoc

[id="networking-osp-enabling-vfio-noiommu_{context}"]
= Enabling the No-IOMMU Operator for the {rh-openstack} VFIO driver

You can apply a machine config to your machine pool that enables the No-IOMMU Operator for the {rh-openstack-first} virtual function I/O (VFIO) driver. The {rh-openstack} vfio-pci driver requires this Operator.

.Procedure

. Create a machine config file from the following template:
+
.A No-IOMMU VFIO machine config file
[source,yaml]
----
kind: MachineConfig
apiVersion: machineconfiguration.openshift.io/v1
metadata:
  name: 99-vfio-noiommu <1>
  labels:
    machineconfiguration.openshift.io/role: worker
spec:
  osImageURL: ''
  config:
    ignition:
      version: 2.2.0
    storage:
      files:
      - filesystem: root
        path: "/etc/modprobe.d/vfio-noiommu.conf"
        contents:
          source: data:text/plain;charset=utf-8;base64,b3B0aW9ucyB2ZmlvIGVuYWJsZV91bnNhZmVfbm9pb21tdV9tb2RlPTEK
          verification: {}
        mode: 0644
----
<1> You can substitute a name of your choice.

. From a command line, apply the machine config:
+
[source,terminal]
----
$ oc apply -f <machine_config_file_name>.yaml
----