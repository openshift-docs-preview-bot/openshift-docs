// Module included in the following assemblies:
//
// * networking/routes/route-configuration.adoc

[id="nw-router-configuring-dual-stack_{context}"]
= Configuring the {product-title} Ingress Controller for dual-stack support

When you install a {product-title} cluster on a dual-stack enabled bare metal infrastructure, you can configure the Ingress Controller for single-stack or dual-stack support.

.Prerequisites

* You deployed an {product-title} cluster on bare metal.
* You installed the OpenShift CLI (`oc`).

.Procedure

To configure the Ingress Controller for single-stack or dual-stack support, create or modify a service by setting the `ipFamilies` and `ipFamilyPolicy` fields.

. Create service by entering the following command:
+
[source,terminal]
----
$ oc get service <service_name>
----
+
. Check your services by entering the following command:
+
[source,terminal]
----
$ oc get service <service_name> -o yaml
----
+
. Edit the `ipFamilies` and `ipFamilyPolicy` fields in the service YAML file:
+
.Sample Network YAML file
[source,yaml]
----
apiVersion: v1
  kind: Service
  metadata:
    creationTimestamp: yyyy-mm-ddT00:00:00Z
    labels:
      name: <service_name>
      manager: kubectl-create
      operation: Update
      time: yyyy-mm-ddT00:00:00Z
    name: <service_name>
    namespace: <namespace_name>
    resourceVersion: "<resource_version_number>"
    selfLink: "/api/v1/namespaces/<namespace_name>/services/<service_name>"
    uid: <uid_number>
  spec:
    clusterIP: 172.30.0.0/16
    clusterIPs: <3>
    - 172.30.0.0/16
    - <second_IP_address>
    ipFamilies: <1>
    - IPv4
    - IPv6
    ipFamilyPolicy: RequireDualStack <2>
    ports:
    - port: 8080
      protocol: TCP
      targetport: 8080
    selector:
      name: <namespace_name>
    sessionAffinity: None
    type: ClusterIP
  status:
    loadbalancer: {}
----
<1> For a single-stack instance, enter `IPv4` or `IPv6`. For a dual-stack instance, enter both `IPv4` and `IPv6`.
<2> For a single-stack instance, enter `SingleStack`. For a dual-stack instance, enter `RequireDualStack`.
<3> In a dual-stack instance, there are two different `clusterIPs` provided.
+
These resources generate corresponding `endpoints`. The Ingress Controller now watches `endpointslices`.
+
. To view `endpoints`, enter the following command:
+
[source,terminal]
----
$ oc get endpoints
----
+
. To view `endpointslices`, enter the following command:
+
[source,terminal]
----
$ oc get endpointslices
----
